#!/usr/bin/env ruby
# coding: utf-8
require 'json'

pipe_path = ARGV[0]
`mkfifo #{pipe_path}` unless File.exists?(pipe_path)

File.open pipe_path, 'r+' do |pipe|
  loop do
    json = pipe.gets
    attributes = JSON.parse(json)

    $stdout.puts attributes['suite']
    $stdout.puts
    $stdout.puts "âœ“ #{attributes['test']}"
    $stdout.flush
  end
end

